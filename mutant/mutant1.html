<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Mutant 1 | Ruby Security Field Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.1.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../ronin/index.html" />
    
    
    <link rel="prev" href="../mutant/index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="3.1" data-basepath=".." data-revision="Sun Jun 07 2015 16:59:18 GMT-0400 (EDT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="0.1" data-path="prerequisites.html">
            
                
                    <a href="../prerequisites.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.</b>
                        
                        Prerequisites
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="0.2" data-path="slides.html">
            
                
                    <a href="../slides.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.2.</b>
                        
                        Intro Slides
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1" data-path="yaml/index.html">
            
                
                    <a href="../yaml/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        YAML
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="yaml/yaml1.html">
            
                
                    <a href="../yaml/yaml1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        YAML 1
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="yaml/yaml2.html">
            
                
                    <a href="../yaml/yaml2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        YAML 2
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="yaml/yaml3.html">
            
                
                    <a href="../yaml/yaml3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        YAML 3
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="yaml/yaml4.html">
            
                
                    <a href="../yaml/yaml4.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        YAML 4
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="parslet/index.html">
            
                
                    <a href="../parslet/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Parslet
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="parslet/json1.html">
            
                
                    <a href="../parslet/json1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        JSON 1
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="parslet/json2.html">
            
                
                    <a href="../parslet/json2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        JSON 2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="mutant/index.html">
            
                
                    <a href="../mutant/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Mutant
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="3.1" data-path="mutant/mutant1.html">
            
                
                    <a href="../mutant/mutant1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Mutant 1
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="ronin/index.html">
            
                
                    <a href="../ronin/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Ronin
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="ronin/exploit1.html">
            
                
                    <a href="../ronin/exploit1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Exploit 1
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="resources.html">
            
                
                    <a href="../resources.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Resources
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="contributors.html">
            
                
                    <a href="../contributors.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Contributors
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Ruby Security Field Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="mutant-level-1">Mutant Level 1</h1>
<p>In this exercise you will learn how to achieve full test coverage over all edge-cases by leveraging <a href="http://en.wikipedia.org/wiki/Mutation_testing" target="_blank">Mutation Testing</a>. In the past you may have tested code by fuzzing the inputs to methods. Instead of fuzzing the inputs of methods, Mutation Testing fuzzes the <em>behaviour</em> of the code and then running the tests against the mutated code. Since the code now has different behaviour, the tests <em>should</em> fail. When every mutation causes a test to fail, you have reached complete test coverage.</p>
<h2 id="challenge">Challenge</h2>
<p>Your task is to write the missing <a href="http://rspec.info/" target="_blank">RSpec</a> tests for <code>SecureDB::Document#grant_access</code> and <code>SecureDB::Document#revoke_access</code> in the <code>spec</code> directory. These methods are very important, as they control whether a User has access to a Document. An untested edge-case in either of these methods could expose classified information. This is where Mutation Testing comes in. Write the tests, verify they pass, and then run Mutant to see if the tests you&apos;ve written cover all of the edge-cases for the application.</p>
<h3 id="pointers">Pointers</h3>
<ul>
<li>Start by reading the code under test to learn where the edge-cases are</li>
<li>Write your tests to try and cover the edge cases<ul>
<li>Obviously, if you don&apos;t know Rspec, this will be difficult</li>
<li>Build them out until they pass under normal conditions</li>
<li>After they pass, run them with mutant to check all edge cases</li>
<li>Keep updating tests until everything is green</li>
</ul>
</li>
</ul>
<h3 id="workflow">Workflow</h3>
<p>There are two rake tasks to help you:</p>
<ul>
<li><code>rake spec</code>: Runs the RSpec tests.</li>
<li><code>rake mutate</code>: Runs the <a href="https://github.com/mbj/mutant#readme" target="_blank">Mutant</a> tool against RSpec test suite.</li>
</ul>
<p><a href="https://github.com/mbj/mutant#readme" target="_blank">Mutant</a> can also be ran against individual methods:</p>
<pre><code>bundle exec mutant --rspec-full -r ./spec/document_spec.rb ::SecureDB::Document#grant_access
</code></pre><p>When <code>rake mutant</code> prints all green, you have achieved full test coverage.</p>
<h2 id="level-1-files">Level 1 Files</h2>
<ul>
<li><a href="https://github.com/trailofbits/rubysec/tree/master/mutant/mutant1" target="_blank">Mutant Level 1</a></li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../mutant/index.html" class="navigation navigation-prev " aria-label="Previous page: Mutant"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../ronin/index.html" class="navigation navigation-next " aria-label="Next page: Ronin"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
