<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Mutant 1 | RubySec Field Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.6">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="trailofbits">
    
    
    <link rel="next" href="../ronin/README.html" />
    
    
    <link rel="prev" href="../mutant/README.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="trailofbits/rubysec" data-level="3.1" data-basepath=".." data-revision="1404262423517">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/trailofbits/rubysec" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/trailofbits/rubysec/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/trailofbits/rubysec/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >RubySec Field Guide</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/trailofbits" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/trailofbits/rubysec/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/trailofbits/rubysec/edit/master/mutant/mutant1.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="yaml/README.html">
            
                
                    <a href="../yaml/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         YAML
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="yaml/yaml1.html">
            
                
                    <a href="../yaml/yaml1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         YAML 1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="yaml/yaml2.html">
            
                
                    <a href="../yaml/yaml2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         YAML 2
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="yaml/yaml3.html">
            
                
                    <a href="../yaml/yaml3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         YAML 3
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="yaml/yaml4.html">
            
                
                    <a href="../yaml/yaml4.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         YAML 4
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="parslet/README.html">
            
                
                    <a href="../parslet/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Parslet
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="parslet/json1.html">
            
                
                    <a href="../parslet/json1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         JSON 1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="parslet/json2.html">
            
                
                    <a href="../parslet/json2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         JSON 2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="mutant/README.html">
            
                
                    <a href="../mutant/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Mutant
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="mutant/mutant1.html">
            
                
                    <a href="../mutant/mutant1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Mutant 1
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="ronin/README.html">
            
                
                    <a href="../ronin/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Ronin
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="ronin/exploit1.html">
            
                
                    <a href="../ronin/exploit1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Exploit 1
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="contributors.html">
            
                
                    <a href="../contributors.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Contributors
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 76.92307692307692%;min-width: 69.23076923076923%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../yaml/README.html" title="YAML" class="chapter done new-chapter" data-progress="1" style="left: 7.6923076923076925%;"></a>
    
        <a href="../yaml/yaml1.html" title="YAML 1" class="chapter done " data-progress="1.1" style="left: 15.384615384615385%;"></a>
    
        <a href="../yaml/yaml2.html" title="YAML 2" class="chapter done " data-progress="1.2" style="left: 23.076923076923077%;"></a>
    
        <a href="../yaml/yaml3.html" title="YAML 3" class="chapter done " data-progress="1.3" style="left: 30.76923076923077%;"></a>
    
        <a href="../yaml/yaml4.html" title="YAML 4" class="chapter done " data-progress="1.4" style="left: 38.46153846153846%;"></a>
    
        <a href="../parslet/README.html" title="Parslet" class="chapter done new-chapter" data-progress="2" style="left: 46.15384615384615%;"></a>
    
        <a href="../parslet/json1.html" title="JSON 1" class="chapter done " data-progress="2.1" style="left: 53.84615384615385%;"></a>
    
        <a href="../parslet/json2.html" title="JSON 2" class="chapter done " data-progress="2.2" style="left: 61.53846153846154%;"></a>
    
        <a href="../mutant/README.html" title="Mutant" class="chapter done new-chapter" data-progress="3" style="left: 69.23076923076923%;"></a>
    
        <a href="../mutant/mutant1.html" title="Mutant 1" class="chapter done " data-progress="3.1" style="left: 76.92307692307692%;"></a>
    
        <a href="../ronin/README.html" title="Ronin" class="chapter  new-chapter" data-progress="4" style="left: 84.61538461538461%;"></a>
    
        <a href="../ronin/exploit1.html" title="Exploit 1" class="chapter  " data-progress="4.1" style="left: 92.3076923076923%;"></a>
    
        <a href="../contributors.html" title="Contributors" class="chapter  new-chapter" data-progress="5" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_4">
                    
                        <h1 id="mutant-level-1">Mutant Level 1</h1>
<p>In this exercise you will learn how to achieve full test coverage over all edge-cases by leveraging <a href="http://en.wikipedia.org/wiki/Mutation_testing" target="_blank">Mutation Testing</a>. In the past you may have tested code by fuzzing the inputs to methods. Instead of fuzzing the inputs of methods, Mutation Testing fuzzes the <em>behaviour</em> of the code and then running the tests against the mutated code. Since the code now has different behaviour, the tests <em>should</em> fail. When every mutation causes a test to fail, you have reached complete test coverage.</p>
<h2 id="challenge">Challenge</h2>
<p>Your task is to write the missing <a href="http://rspec.info/" target="_blank">RSpec</a> tests for <code>SecureDB::Document#grant_access</code> and <code>SecureDB::Document#revoke_access</code> in the <code>spec</code> directory. These methods are very important, as they control whether a User has access to a Document. An untested edge-case in either of these methods could expose classified information. This is where Mutation Testing comes in. Write the tests, verify they pass, and then run Mutant to see if the tests you&#39;ve written cover all of the edge-cases for the application.</p>
<h3 id="pointers">Pointers</h3>
<ul>
<li>Start by reading the code under test to learn where the edge-cases are</li>
<li>Write your tests to try and cover the edge cases<ul>
<li>Obviously, if you don&#39;t know Rspec, this will be difficult</li>
<li>Build them out until they pass under normal conditions</li>
<li>After they pass, run them with mutant to check all edge cases</li>
<li>Keep updating tests until everything is green</li>
</ul>
</li>
</ul>
<h3 id="workflow">Workflow</h3>
<p>There are two rake tasks to help you:</p>
<ul>
<li><code>rake spec</code>: Runs the RSpec tests.</li>
<li><code>rake mutate</code>: Runs the <a href="https://github.com/mbj/mutant#readme" target="_blank">Mutant</a> tool against RSpec test suite.</li>
</ul>
<p><a href="https://github.com/mbj/mutant#readme" target="_blank">Mutant</a> can also be ran against individual methods:</p>
<pre><code>bundle exec mutant --rspec-full -r ./spec/document_spec.rb ::SecureDB::Document#grant_access
</code></pre><p>When <code>rake mutant</code> prints all green, you have achieved full test coverage.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../mutant/README.html" class="navigation navigation-prev " aria-label="Previous page: Mutant"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../ronin/README.html" class="navigation navigation-next " aria-label="Next page: Ronin"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"night"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
